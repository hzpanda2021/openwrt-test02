# SPDX-License-Identifier: GPL-2.0-only
#
# Copyright (C) 2006-2013 OpenWrt.org
menu "Target Images"
	menuconfig TARGET_ROOTFS_INITRAMFS
		bool "ramdisk"
		default y if USES_INITRAMFS
		help
		  Embed the root filesystem into the kernel (initramfs).
		choice
			prompt "Compression"
			default TARGET_INITRAMFS_COMPRESSION_LZMA if TARGET_apm821xx
			default TARGET_INITRAMFS_COMPRESSION_LZMA if TARGET_ath79_mikrotik
			default TARGET_INITRAMFS_COMPRESSION_LZMA if TARGET_lantiq
			default TARGET_INITRAMFS_COMPRESSION_LZMA if TARGET_mpc85xx
			default TARGET_INITRAMFS_COMPRESSION_LZMA if TARGET_ramips
			default TARGET_INITRAMFS_COMPRESSION_LZMA if TARGET_ipq40xx
			default TARGET_INITRAMFS_COMPRESSION_XZ if USES_SEPARATE_INITRAMFS
			default TARGET_INITRAMFS_COMPRESSION_NONE
			depends on TARGET_ROOTFS_INITRAMFS
@@ -241,7 +242,7 @@ menu "Target Images"
	config GRUB_TIMEOUT
		string "Seconds to wait before booting the default entry"
		depends on GRUB_IMAGES || GRUB_EFI_IMAGES
		default "5"
		default "0"
		help
		  If you don't know, 5 seconds is a reasonable default.

@@ -268,12 +269,13 @@ menu "Target Images"
		bool "Build VMware image files (VMDK)"
		depends on TARGET_x86
		depends on GRUB_IMAGES || GRUB_EFI_IMAGES
		default y
		select PACKAGE_kmod-e1000

	config TARGET_IMAGES_GZIP
		bool "GZip images"
		depends on TARGET_ROOTFS_EXT4FS || TARGET_x86 || TARGET_armvirt || TARGET_malta
		default y
		default n

	comment "Image Options"

@@ -289,7 +291,7 @@ menu "Target Images"
	config TARGET_ROOTFS_PARTSIZE
		int "Root filesystem partition size (in MB)"
		depends on USES_ROOTFS_PART || TARGET_ROOTFS_EXT4FS || TARGET_omap || TARGET_sunxi || TARGET_uml
		default 104
		default 160
		help
		  Select the root filesystem partition size.

	config TARGET_ROOTFS_PARTNAME
		string "Root partition on target device"
		depends on GRUB_IMAGES || GRUB_EFI_IMAGES
		help
		  Override the root partition on the final device. If left empty,
		  it will be mounted by PARTUUID which makes the kernel find the
		  appropriate disk automatically.
endmenu
